webpackJsonp([1],{"1/oy":function(e,t){},"9M+g":function(e,t){},GfHa:function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("pFYg"),a=n.n(o),i=n("7+uW"),r=(n("Jmt5"),n("9M+g"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var s=n("VU/8")({name:"App"},r,!1,function(e){n("hikc")},null,null).exports,u=n("/ocq"),l=n("NYxO");function c(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return[e(),e(),"-",e(),"-",e(),"-",e(),"-",e(),e(),e()].join("")}i.a.use(l.a);var d=new l.a.Store({state:{tables:[]},mutations:{addTable:function(e){e.tables.push({id:c(),name:null,comment:null,columns:[]}),JSLog("storeERD","addTable"),JSLog("to",e.tables)},addColumn:function(e,t){for(var n=e.tables.length,o=0;o<n;o++)if(t.id===e.tables[o].id){e.tables[o].columns.push({id:c(),name:null,comment:null,dataType:null,notNull:!1});break}}}}),m={name:"TopMenu",methods:{addTable:function(){d.commit({type:"addTable"})}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"menuBar"},[t("b-button",{on:{click:this.addTable}},[t("font-awesome-icon",{attrs:{icon:"table"}})],1)],1)},staticRenderFns:[]};var v=n("VU/8")(m,f,!1,function(e){n("sRcS")},"data-v-de672f74",null).exports;function p(e,t){e.style.zIndex=t}function g(e,t,n){if(!n.draggableElementId||function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e)return!0;return!1}(n.draggableElementId,e.path)){n.overlay&&n.overlay.remove(),n.width=t.offsetWidth,n.height=t.offsetHeight,n.down=!0,n.initialX=e.clientX,n.initialY=e.clientY;var o=function(e,t,n){var o=document.createElement("div");return o.setAttribute("style","\n    width: 100vw; \n    height: 100vh; \n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 10000;\n  "),o.addEventListener("mouseup",function(e){return h(e,t,n)}),o.addEventListener("mousedown",function(e){return g(e,t,n)}),o.addEventListener("mousemove",function(e){return b(e,t,n)}),document.body.appendChild(o),o}(0,t,n);n.overlay=o,p(t,10001)}}function h(e,t,n){n.down=!1,n.overlay&&(n.overlay.removeEventListener("mouseup",h),n.overlay.removeEventListener("mousedown",g),n.overlay.removeEventListener("mousemove",b),n.overlay.remove(),p(t,n.initialZIndex),w(t,n))}function b(e,t,n){if(n.down){var o=n.cursorPreviousX>e.clientX,a=n.cursorPreviousX<e.clientX,i=n.cursorPreviousY<e.clientY,r=n.cursorPreviousY>e.clientY;n.constraintToWindow&&(function(e,t,n){return e.offsetLeft+t.width>=window.innerWidth&&!n}(t,n,o)||function(e,t,n){return e.offsetLeft<=0&&!n}(t,0,a))||(t.style.left=n.draggerOffsetLeft+(e.clientX-n.initialX)+"px"),n.constraintToWindow&&(function(e,t,n){return e.offsetTop<=0&&!n}(t,0,i)||function(e,t,n){return e.offsetTop+t.height>=window.innerHeight&&!n}(t,n,r))||(t.style.top=n.draggerOffsetTop+(e.clientY-n.initialY)+"px")}n.cursorPreviousX=e.clientX,n.cursorPreviousY=e.clientY}function w(e,t){t.draggerOffsetLeft=e.offsetLeft,t.draggerOffsetTop=e.offsetTop}var y={name:"MainCanvas",directives:{drag:i.a.directive("drag",{inserted:function(e,t,n){var o={draggableElementId:null,down:!1,height:0,width:0,initialX:0,initialY:0,constraintToWindow:!1,cursorPreviousX:0,cursorPreviousY:0,draggerOffsetLeft:0,draggerOffsetTop:0,overlay:null,draggableEl:null,initialZIndex:void 0};o.draggableElementId=t.arg||null,o.constraintToWindow=t.modifiers["window-only"],e.addEventListener("mouseup",function(t){return h(0,e,o)}),e.addEventListener("mousedown",function(t){return g(t,e,o)}),e.addEventListener("mousemove",function(t){return b(t,e,o)}),w(e,o),o.initialZIndex=e.style.zIndex}})},computed:{tables:function(){return d.state.tables}},methods:{addColumn:function(e){JSLog("MainCanvas","addColumn",e),d.commit({type:"addColumn",id:e})},changeNull:function(e,t){var n=this.getTable(e),o=this.getColumn(n,t);o.notNull=!o.notNull},getTable:function(e){for(var t=this.tables.length,n=0;n<t;n++)if(e===this.tables[n].id)return this.tables[n]},getColumn:function(e,t){for(var n=e.columns.length,o=0;o<n;o++)if(t===e.columns[o].id)return e.columns[o]}}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.tables,function(t){return n("div",{directives:[{name:"drag",rawName:"v-drag"}],key:t.id,staticClass:"table"},[n("div",{staticClass:"tableHeader"},[n("b-container",[n("b-row",[n("b-col",{attrs:{sm:"11"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"table.name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-button",{on:{click:function(n){e.addColumn(t.id)}}},[n("font-awesome-icon",{attrs:{icon:"plus"}})],1)],1)],1)],1)],1),e._v(" "),e._l(t.columns,function(o){return n("div",{key:o.id},[n("b-container",[n("b-row",[n("b-col",{attrs:{sm:"3"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.name,expression:"column.name"}],attrs:{type:"text",placeholder:"column"},domProps:{value:o.name},on:{input:function(t){t.target.composing||e.$set(o,"name",t.target.value)}}})]),e._v(" "),n("b-col",{attrs:{sm:"3"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.dataType,expression:"column.dataType"}],attrs:{type:"text",placeholder:"dataType"},domProps:{value:o.dataType},on:{input:function(t){t.target.composing||e.$set(o,"dataType",t.target.value)}}})]),e._v(" "),n("b-col",{attrs:{sm:"3"}},[o.notNull?n("input",{attrs:{type:"text",readonly:"",value:"N-N"},on:{click:function(n){e.changeNull(t.id,o.id)}}}):n("input",{attrs:{type:"text",readonly:"",value:"NULL"},on:{click:function(n){e.changeNull(t.id,o.id)}}})]),e._v(" "),n("b-col",{attrs:{sm:"3"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.comment,expression:"column.comment"}],attrs:{type:"text",placeholder:"comment"},domProps:{value:o.comment},on:{input:function(t){t.target.composing||e.$set(o,"comment",t.target.value)}}})])],1)],1)],1)})],2)}))},staticRenderFns:[]};var T={name:"ERD",components:{MainCanvas:n("VU/8")(y,L,!1,function(e){n("Udpu")},"data-v-08e4bc46",null).exports,TopMenu:v}},x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("top-menu"),this._v(" "),t("main-canvas")],1)},staticRenderFns:[]};var E=n("VU/8")(T,x,!1,function(e){n("pRj4")},"data-v-057e01e2",null).exports;i.a.use(u.a);var N=new u.a({mode:"history",routes:[{path:"/",name:"ERD",component:E}]});i.a.use(l.a);var _=new l.a.Store({state:{},mutations:{}}),C=n("mtWM"),S=n.n(C),Y=n("e6fC"),J=n("C/JF"),P=n("fhbW"),X=n("U0v6");n.d(t,"eventBus",function(){return I}),i.a.config.productionTip=!1,i.a.prototype.$http=S.a,i.a.use(Y.a),J.library.add(P.b,P.a),i.a.component("font-awesome-icon",X.FontAwesomeIcon);var I=new i.a;new i.a({el:"#app",router:N,store:_,components:{App:s},template:"<App/>"}),window.JSLog=function(e,t){if("to"==e){var n="",o=[],i=0;for(var r in t)0!=i&&(n+="JSLog: "),i++,n+=r+" : "+t[r]+"\n","object"==a()(t[r])&&o.push({name:r,o:t[r]});JSLog(n),o.forEach(function(e){JSLog("-> "+e.name),JSLog("to",e.o)})}else{var s=Array.prototype.slice.call(arguments);window.console&&console.log("JSLog: "+s.join(" | "))}}},Udpu:function(e,t){},hikc:function(e,t){},pRj4:function(e,t){},sRcS:function(e,t){},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a2d6e1fd624c207ea67b.js.map